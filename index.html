<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <canvas
      id="canvas"
      width="1000"
      height="600"
      style="background-color: mediumturquoise"
    ></canvas>
    <script>
      /* Game configs */
      const DEBUG_MODE = false;

      /* Get the canvas object */
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");
      const gameObjects = [];

      /* Images */
      class MainCharacter {
        constructor(x = 10, y = 350, width = 90, height = 90) {
          this.x = x;
          this.y = y;
          this.state = "normal";
          this.width = width;
          this.height = height;
          this.image = new Image();
          this.image.src = "./assets/images/chara1.png";
        }

        jump() {
          if (this.state === "jump") {
            return;
          }
          this.state = "jump";
          this.y -= 120;
        }

        update() {
          if (DEBUG_MODE) {
            ctx.strokeStyle = "purple";
            ctx.lineWidth = 1;
            ctx.rect(this.x, this.y, this.width, this.height);
            ctx.stroke();
          }
          if (this.y < 350) {
            this.y += 5;
          } else {
            this.state = "normal";
            this.y = 350;
          }
          ctx.drawImage(this.image, this.x, this.y, this.width, this.height);
        }
      }

      class Stone {
        constructor(x = 900, y = 380, width = 60, height = 60) {
          this.x = x;
          this.y = y;
          this.speed = 10;
          this.width = width;
          this.height = height;
          this.image = new Image();
          this.image.src = "./assets/images/stone.png";
        }

        update() {
          this.x -= this.speed;
          if (DEBUG_MODE) {
            ctx.strokeStyle = "purple";
            ctx.lineWidth = 1;
            ctx.rect(this.x, this.y, this.width, this.height);
            ctx.stroke();
          }
          if (this.x < 0) {
            this.x = 1000;
          }
          ctx.drawImage(this.image, this.x, this.y, this.width, this.height);
        }
      }

      const chara = new MainCharacter();
      const stone1 = new Stone(900);
      const stone2 = new Stone(1100);
      const stone3 = new Stone(1300);

      canvas.onclick = (event) => {
        // chara.y -= 120
        chara.jump();
      };

      setInterval(() => {
        ctx.fillRect(0, 0, 1000, 600);
        chara.update();
        stone1.update();
        stone2.update();
        stone3.update();
      }, 33); // 30fps frame per seconds
    </script>
  </body>
</html>
